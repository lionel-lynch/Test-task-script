# Тестовое задание

Содержание:
- [О скрипте]
- [Особенности реализации]
- [Использование скрипта]

В данном файле представлена документация к скрипту. Также, в папке /webDocs, есть файл index.html. В нём данная информация представлена в виде HTML-разметки, для удобства восприятия.

# О скрипте
Данный скрипт предназначен для сжатия изображений. Изображения берутся из папки /src/assets, сжимаются, после чего складываются в папку /src/compressed-images.

Название папки с исходными изображениями, при необходимости, можно изменить. Но после изменения названия самой папки также необходимо изменить значение переменной origDirectoryName, определённой в самом начале кода скрипта. В ней хранится название папки с исходниками и именно данная переменная используется для построения путей к файлам в скрипте. 

Папка с обработанными изображениями создаётся заново при каждом запуске скрипта. Название данной папки также можно поменять. Для этого необходимо изменить значение переменной destDirectoryName, определённой в самом начале скрипта.

Скрипт обрабатывает только файлы с расширениями .jpg, .png, .webp. Другие форматы API для сжатия изображений не принимает.

# Особенности реализации
Код скрипта написан на языке JavaScript и предназначен для выполнения на платформе Node.js. В скрипте использованы следующие модули:
1. fs - модуль для работы с файловой системой
2. path - модуль для работы с путями к файлам и папкам
3. dotenv - модуль для возможности добавления своих переменных окружения
4. tinify - модуль для сжатия изображений

Сжатие в скрипте реализовано при помощи TinyPNG API. Ссылка на документацию к API - https://tinypng.com/developers/reference.

Язык программирования JavaScript я выбрал потому что это единственный скриптовый язык который я знаю. Изучать я его начал так как это самый популярный язык для написания фронтенда сайтов.
Платформу Node.js я выбрал потому что это единственный известный мне инструмент, где используя язык JavaScript можно работать с файловой системой.

Путь к каталогу с исходными файлами я решил задать перемонной в самом скрипте, так как на мой взгляд такой вариант более гибкий. Человеку, который будет использовать данный скрипт не придётся ничего дополнительно конфигурировать.
Путь к каталогу со сжатыми изображениями, возможно, было бы удобнее задавать параметром командной строки, но я решил записать его в переменную в скрипте для единства реализации. (Чтоб было реализовано по аналогии с путём к каталогу с исходными файлами).
При желании названия папок с исходными и обработанными изображениями можно поменять. Как это сделать описано в разделе "О скрипте".

Ключ для TinyPNG API хранится в переменной окружения, в файле /.env. Именно таким образом и рекомендуется хранить подобные данные. Переменные окружения хранятся вне кода скрипта, а файл с ними не загружают в git-репозиторий. За счёт этого достигается безопасность хранимых в них данных.

Алгоритм работы скрипта можно описать следующим образом: в начале работы скрипт проверяет, создана ли папка, в которую будут складываться обработанные изображения. Если создана - она удаляется. Затем она создаётся заново. Далее, скрипт считывает файлы из папки, где лежат исходные изображения. Он проходится по всем файлам и проверяет: если очередной проверяемый файл является изображением подходящего формата, а также весит более 100 килобайт - он сжимается и итоговый файл складывается в папку со всеми сжатыми картинками.

# Использование скрипта
Для того, чтобы сжать изображения при помощи данного скрипта необходимо выполнить следующие действия:
1. Установить себе на компьютер платформу Node.js
2. Скачать исходники скрипта из репозитория https://github.com/lionel-lynch/Test-task-script
3. Поместить изображения, которые хотите сжать в папку /src/assets (в этой папке уже есть тестовые изображения)
4. В терминале Вашей ОС перейти в папку с исходниками и по очереди запустить команды

    ```bash
    npm install
    node src/index.js
    ```

Сжатые изображения будут расположены в папке /src/compressed-images